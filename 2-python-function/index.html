
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="http://python.hackerphysics.com/2-python-function/">
      
      <link rel="icon" href="../images/python.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.11">
    
    
      
        <title>函数 - C++程序员的Python入门</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50e68009.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="C++程序员的Python入门" class="md-header__button md-logo" aria-label="C++程序员的Python入门" data-md-component="logo">
      
  <img src="../images/python.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            C++程序员的Python入门
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              函数
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      前言
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../1-python-fundamentals/" class="md-tabs__link">
      基础知识
    </a>
  </li>

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link md-tabs__link--active">
      函数
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../3-python-class/" class="md-tabs__link">
      类
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../4-python-module/" class="md-tabs__link">
      模块
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../5-python-numpy/" class="md-tabs__link">
      科学计算
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../6-python-applications/" class="md-tabs__link">
      实战
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="C++程序员的Python入门" class="md-nav__button md-logo" aria-label="C++程序员的Python入门" data-md-component="logo">
      
  <img src="../images/python.png" alt="logo">

    </a>
    C++程序员的Python入门
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        前言
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../1-python-fundamentals/" class="md-nav__link">
        基础知识
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          函数
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        函数
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    什么是函数？
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    定义函数
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    一切皆对象
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    魔法方法
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    函数参数
  </a>
  
    <nav class="md-nav" aria-label="函数参数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-value" class="md-nav__link">
    位置参数和key-value参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    可变数目参数
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    函数的返回值
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    类型注解和静态代码分析
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    函数编程
  </a>
  
    <nav class="md-nav" aria-label="函数编程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    函数作为变量
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    迭代器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    生成器
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    递归
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    函数作为参数
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    函数作为返回值
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    闭包
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../3-python-class/" class="md-nav__link">
        类
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../4-python-module/" class="md-nav__link">
        模块
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../5-python-numpy/" class="md-nav__link">
        科学计算
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../6-python-applications/" class="md-nav__link">
        实战
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

<h1 id="_1">函数</h1>
<h2 id="_2">什么是函数？</h2>
<p>函数在数学上有着清晰的定义，常用的表达形式如下:</p>
<div class="arithmatex">\[
y = f(x)
\]</div>
<p>其中x是自变量，y是因变量（返回值），f是对应法则。编程语言中的函数和数学上的函数在本质上是一样的，但也有一些明显的区别。我们先看一下C++中函数的标准定义，</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kt">double</span><span class="w"> </span><span class="nf">sqrt</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>C++中的函数的参数和返回值都定义了类型，这是和 <span class="arithmatex">\(y=f(x)\)</span> 最大的区别。数学上的函数处理的都是“<strong>数</strong>”，所以不需要特别指出类型。从这个角度看，编程语言中的函数在形式上其实要比数学上的函数复杂：通过对参数数量、类型，返回值类型的各种排列组合，可以给出丰富和复杂的函数定义。如果我们忽略一个函数的具体实现，</p>
<ul>
<li>函数名</li>
<li>输入参数列表 </li>
<li>输出/返回值</li>
</ul>
<h2 id="_3">定义函数</h2>
<p>在Python中定义函数利用如下语句。
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>    <span class="k">pass</span> <span class="c1"># 什么也不想做的时候用pass</span>
</code></pre></div>
这个函数什么也没做，没有输入也没有输出，调用它不会产生任何效果。但你不要小看它，正所谓<strong>麻雀虽小，五脏俱全</strong>，这个函数包含的内容一点不简单。我们可以用 <em>dir()</em> 函数查看任何一个函数的细节：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="nb">dir</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="o">[</span><span class="s1">&#39;__annotations__&#39;</span>,
<a id="__codelineno-3-2" name="__codelineno-3-2"></a> <span class="s1">&#39;__call__&#39;</span>,
<a id="__codelineno-3-3" name="__codelineno-3-3"></a> <span class="s1">&#39;__class__&#39;</span>,
<a id="__codelineno-3-4" name="__codelineno-3-4"></a> <span class="s1">&#39;__closure__&#39;</span>,
<a id="__codelineno-3-5" name="__codelineno-3-5"></a> <span class="s1">&#39;__code__&#39;</span>,
<a id="__codelineno-3-6" name="__codelineno-3-6"></a> <span class="s1">&#39;__defaults__&#39;</span>,
<a id="__codelineno-3-7" name="__codelineno-3-7"></a> <span class="s1">&#39;__delattr__&#39;</span>,
<a id="__codelineno-3-8" name="__codelineno-3-8"></a> <span class="s1">&#39;__dict__&#39;</span>,
<a id="__codelineno-3-9" name="__codelineno-3-9"></a> <span class="s1">&#39;__dir__&#39;</span>,
<a id="__codelineno-3-10" name="__codelineno-3-10"></a> <span class="s1">&#39;__doc__&#39;</span>,
<a id="__codelineno-3-11" name="__codelineno-3-11"></a> <span class="s1">&#39;__eq__&#39;</span>,
<a id="__codelineno-3-12" name="__codelineno-3-12"></a> <span class="s1">&#39;__format__&#39;</span>,
<a id="__codelineno-3-13" name="__codelineno-3-13"></a> <span class="s1">&#39;__ge__&#39;</span>,
<a id="__codelineno-3-14" name="__codelineno-3-14"></a> <span class="s1">&#39;__get__&#39;</span>,
<a id="__codelineno-3-15" name="__codelineno-3-15"></a> <span class="s1">&#39;__getattribute__&#39;</span>,
<a id="__codelineno-3-16" name="__codelineno-3-16"></a> <span class="s1">&#39;__globals__&#39;</span>,
<a id="__codelineno-3-17" name="__codelineno-3-17"></a> <span class="s1">&#39;__gt__&#39;</span>,
<a id="__codelineno-3-18" name="__codelineno-3-18"></a> <span class="s1">&#39;__hash__&#39;</span>,
<a id="__codelineno-3-19" name="__codelineno-3-19"></a> <span class="s1">&#39;__init__&#39;</span>,
<a id="__codelineno-3-20" name="__codelineno-3-20"></a> <span class="s1">&#39;__init_subclass__&#39;</span>,
<a id="__codelineno-3-21" name="__codelineno-3-21"></a> <span class="s1">&#39;__kwdefaults__&#39;</span>,
<a id="__codelineno-3-22" name="__codelineno-3-22"></a> <span class="s1">&#39;__le__&#39;</span>,
<a id="__codelineno-3-23" name="__codelineno-3-23"></a> <span class="s1">&#39;__lt__&#39;</span>,
<a id="__codelineno-3-24" name="__codelineno-3-24"></a> <span class="s1">&#39;__module__&#39;</span>,
<a id="__codelineno-3-25" name="__codelineno-3-25"></a> <span class="s1">&#39;__name__&#39;</span>,
<a id="__codelineno-3-26" name="__codelineno-3-26"></a> <span class="s1">&#39;__ne__&#39;</span>,
<a id="__codelineno-3-27" name="__codelineno-3-27"></a> <span class="s1">&#39;__new__&#39;</span>,
<a id="__codelineno-3-28" name="__codelineno-3-28"></a> <span class="s1">&#39;__qualname__&#39;</span>,
<a id="__codelineno-3-29" name="__codelineno-3-29"></a> <span class="s1">&#39;__reduce__&#39;</span>,
<a id="__codelineno-3-30" name="__codelineno-3-30"></a> <span class="s1">&#39;__reduce_ex__&#39;</span>,
<a id="__codelineno-3-31" name="__codelineno-3-31"></a> <span class="s1">&#39;__repr__&#39;</span>,
<a id="__codelineno-3-32" name="__codelineno-3-32"></a> <span class="s1">&#39;__setattr__&#39;</span>,
<a id="__codelineno-3-33" name="__codelineno-3-33"></a> <span class="s1">&#39;__sizeof__&#39;</span>,
<a id="__codelineno-3-34" name="__codelineno-3-34"></a> <span class="s1">&#39;__str__&#39;</span>,
<a id="__codelineno-3-35" name="__codelineno-3-35"></a> <span class="s1">&#39;__subclasshook__&#39;</span><span class="o">]</span>
</code></pre></div>
<blockquote>
<p>dir() 方法像是一个透视镜，是一个非常有用的工具。</p>
</blockquote>
<p>一个普通的函数已经自带了这么内容？没有想到吧。在C++中如果你定义了一个如下函数，
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">foo</span><span class="p">(){}</span><span class="w"></span>
</code></pre></div>
那么它看起来就是一个什么都没有的函数，实际上占用的内存也尽可能小。那么在Python里面为什么会不一样呢？</p>
<h2 id="_4">一切皆对象</h2>
<p>C++虽然也是面向对象的编程语言，但是远没有其他一些面向对象的编程语言那样极端。在Python里面<strong>一切都是对象</strong>。这句话的意思是：任何变量——包括整数，浮点数，字符串，任何函数，以及任何类都是对象。比如我们同样用dir方法查看一个整数，你会发现它同样包含了很多内容。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="nb">dir</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a>[&#39;__abs__&#39;,
<a id="__codelineno-6-2" name="__codelineno-6-2"></a> &#39;__add__&#39;,
<a id="__codelineno-6-3" name="__codelineno-6-3"></a> &#39;__and__&#39;,
<a id="__codelineno-6-4" name="__codelineno-6-4"></a> &#39;__bool__&#39;,
<a id="__codelineno-6-5" name="__codelineno-6-5"></a> &#39;__ceil__&#39;,
<a id="__codelineno-6-6" name="__codelineno-6-6"></a> &#39;__class__&#39;,
<a id="__codelineno-6-7" name="__codelineno-6-7"></a> &#39;__delattr__&#39;,
<a id="__codelineno-6-8" name="__codelineno-6-8"></a> &#39;__dir__&#39;,
<a id="__codelineno-6-9" name="__codelineno-6-9"></a> &#39;__divmod__&#39;,
<a id="__codelineno-6-10" name="__codelineno-6-10"></a> &#39;__doc__&#39;,
<a id="__codelineno-6-11" name="__codelineno-6-11"></a> &#39;__eq__&#39;,
<a id="__codelineno-6-12" name="__codelineno-6-12"></a> &#39;__float__&#39;,
<a id="__codelineno-6-13" name="__codelineno-6-13"></a> &#39;__floor__&#39;,
<a id="__codelineno-6-14" name="__codelineno-6-14"></a> &#39;__floordiv__&#39;,
<a id="__codelineno-6-15" name="__codelineno-6-15"></a> &#39;__format__&#39;,
<a id="__codelineno-6-16" name="__codelineno-6-16"></a> &#39;__ge__&#39;,
<a id="__codelineno-6-17" name="__codelineno-6-17"></a> &#39;__getattribute__&#39;,
<a id="__codelineno-6-18" name="__codelineno-6-18"></a> &#39;__getnewargs__&#39;,
<a id="__codelineno-6-19" name="__codelineno-6-19"></a> &#39;__gt__&#39;,
<a id="__codelineno-6-20" name="__codelineno-6-20"></a> &#39;__hash__&#39;,
<a id="__codelineno-6-21" name="__codelineno-6-21"></a> &#39;__index__&#39;,
<a id="__codelineno-6-22" name="__codelineno-6-22"></a> &#39;__init__&#39;,
<a id="__codelineno-6-23" name="__codelineno-6-23"></a> &#39;__init_subclass__&#39;,
<a id="__codelineno-6-24" name="__codelineno-6-24"></a> &#39;__int__&#39;,
<a id="__codelineno-6-25" name="__codelineno-6-25"></a> &#39;__invert__&#39;,
<a id="__codelineno-6-26" name="__codelineno-6-26"></a> &#39;denominator&#39;,
<a id="__codelineno-6-27" name="__codelineno-6-27"></a> &#39;from_bytes&#39;,
<a id="__codelineno-6-28" name="__codelineno-6-28"></a> &#39;imag&#39;,
<a id="__codelineno-6-29" name="__codelineno-6-29"></a> &#39;numerator&#39;,
<a id="__codelineno-6-30" name="__codelineno-6-30"></a> &#39;real&#39;,
<a id="__codelineno-6-31" name="__codelineno-6-31"></a> &#39;to_bytes&#39;]
</code></pre></div>
<p>这些双下划线开头和结尾的方法被成为<strong>魔法方法</strong>，是Python默认为我们创建的。想一想C++中的类，当我们不显示定义构造方法的时候，编译器会帮助我们创建一个默认构造方法。因为在Python中一切皆对象，所以每个对象都有一些编译器帮忙创造的默认方法。 即使是一个什么也不做的函数，或者一个整数变量，都会又丰富的<strong>魔法方法</strong>。</p>
<blockquote>
<p>在C++中，即使又很多默认方法，但你是看不到他们的，相比之下，他们在Python中更加<strong>可见</strong>。可见性的概念在软件开发中很重要，这一点请在Python中慢慢体会。</p>
<p>关于一切皆对象的概念，请慢慢去体会，它会导致与C++中完全不一样的开发体验。因为一切皆对象的缘故，在Python中你看到的内置类型和C++是有所区别的。比如int类型，在C/C++里面它只占用内存中的四个字节，但是在Python里它还包含了对象头：</p>
</blockquote>
<p><img alt="20220213175357" src="http://haipeng-openwrite.oss-cn-beijing.aliyuncs.com/images%5C8e02f92647b2343c12df4f2142fb6a12.png" /></p>
<h2 id="_5">魔法方法</h2>
<p>魔法方法通常都会被编译器自动调用，并且不同对象的默认魔法方法是不同的，上述函数和整数变量的魔法方法就有很多不同。我们以 <strong>add</strong> 这一魔法方法为例，看一下它的用途：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="n">a</span> <span class="o">+</span> <span class="mi">2</span> <span class="c1"># 实际上调用了 __add__ 魔法方法</span>
</code></pre></div>
<p>不过，Python并没有阻止我们手动去调用这些方法：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="n">a</span><span class="o">.</span><span class="fm">__add__</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># 你会得到 3</span>
</code></pre></div>
<p>了解这点之后，你就可以自己给任何一个对象定义__add__方法，在C++里，相当于你重载了 + 这个运算符。这一道理对其他任何魔法方法都适用，Python中的魔法方法实在是有点多，在此就不一一列举他们的作用了，需要了解的时候请尽情google之。</p>
<h2 id="_6">函数参数</h2>
<p>了解完魔法方法之后，我们开始定义一些真正有用的函数，并研究一下它的性质。</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="k">def</span> <span class="nf">print3</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">):</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
</code></pre></div>
这个函数只负责打印三个输入变量。这里我们并没有定义三个输入参数的类型，因为Python是动态类型语言，会在运行时去判别变量的类型，不需要在定义的时候显示指定。这给开发带来了很多灵活性。</p>
<h3 id="key-value">位置参数和key-value参数</h3>
<p>在调用任何一个方法或函数时，都可以有以下三种方式来传递参数:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="n">print3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="n">print3</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="n">print3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="c1"># 1 2 3</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="c1"># 1 2 3</span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="c1"># 1 2 3</span>
</code></pre></div>
1. 首先，我们可以按位置传入每个参数，这和C++并没有什么不同。
2. 其次，我们也可以按照参数名和值的键值对方式传入参数，当你指定参数名的时候，顺序就变得不重要了。
3. 混合使用两种方式传入参数：前面是按照位置传入，后面按照key-value的形式传入。</p>
<p>那么，是不是可以随便混用呢？试一试：</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="n">print3</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a>  File <span class="s2">&quot;C:\Users\haipw\AppData\Local\Temp/ipykernel_47416/3420492099.py&quot;</span>, line <span class="m">1</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a>    f<span class="o">(</span><span class="m">1</span>,b <span class="o">=</span> <span class="m">2</span>, <span class="m">3</span><span class="o">)</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a>                ^
<a id="__codelineno-12-4" name="__codelineno-12-4"></a>SyntaxError: positional argument follows keyword argument
</code></pre></div></p>
<p>仔细阅读错误提示，它已经告诉你答案：<strong>SyntaxError: positional argument follows keyword argument.</strong> ，Python不允许这样做。</p>
<h3 id="_7">可变数目参数</h3>
<p>以上方法已经够灵活了，但是程序员的需求是无止境的，有时候我们还想更灵活一些。上面定义的函数，只能接受三个参数，如果我们想随便给一个函数传入任意数量的参数呢？（有点太随意了，但Python可以满足你）:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;args:&quot;</span><span class="p">)</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a>    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a>        <span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;kwargs:&quot;</span><span class="p">)</span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a>    <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a>        <span class="nb">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="c1"># 1 2 3</span>
<a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="c1"># args:</span>
<a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="c1"># 4</span>
<a id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="c1"># 5</span>
<a id="__codelineno-13-16" name="__codelineno-13-16"></a><span class="c1"># 6</span>
<a id="__codelineno-13-17" name="__codelineno-13-17"></a><span class="c1"># kwargs:</span>
<a id="__codelineno-13-18" name="__codelineno-13-18"></a><span class="c1"># x 1</span>
<a id="__codelineno-13-19" name="__codelineno-13-19"></a><span class="c1"># y 4</span>
</code></pre></div>
<p>*args 把所有未知的 positional arguments收集到一个列表里面，**kwargs把所有未知的keyword arguments收集到一个字典里面。星号在这里可以理解为 <strong>收集</strong> 或者 <strong>打包压缩</strong>。</p>
<h2 id="_8">函数的返回值</h2>
<p>在c++里面，函数只能有一个返回值，如果你想返回多个值，它们必须被包含在一个对象里面。在Python里也是如此，但看起来略有不同：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a>    <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="mi">3</span><span class="o">*</span><span class="n">x</span>
</code></pre></div>
<p>好像我们可以返回多个值啊？打印一个试试：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="c1"># (1, 2, 3)</span>
</code></pre></div>
<p>从输出的结果看，我们得到的其实是一个元组（注意他们是被括号包裹起来的，是元组的形式）。所以虽然看起来你返回来多个结果，但是Python又偷偷做了一层处理，返回的还是一个。最终，你可以直接用一个元组变量去接收这个返回值，也可以利用<strong>多元赋值</strong>的性质，直接把元组赋值给三个变量。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="n">x</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x3</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<p>第二种写法，看起来和你返回了多个结果没什么区别。试想一下，如果让你写一个函数返回一个整数，一个数组和一个字符串，在C++里面你会怎么实现？而在Python里面，你甚至都不用想去如何实现，直接返回就是了。</p>
<h2 id="_9">类型注解和静态代码分析</h2>
<p>函数的参数和返回值也是动态类型，这虽然很灵活，但是也会带来很多问题，让一些隐藏的bug不容易被发现。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span><span class="nb">str</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span><span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a>    <span class="k">return</span> <span class="p">{}</span>
</code></pre></div>
<p>linter 静态代码分析工具。可以帮助你检查潜在的错误。这样你可以在运行之前发现问题，而不是在代码上线之后才发现一堆bug~。</p>
<h2 id="_10">函数编程</h2>
<h3 id="_11">函数作为变量</h3>
<p>lambda 表达式</p>
<h3 id="_12">迭代器</h3>
<h3 id="_13">生成器</h3>
<p><img alt="🔗" class="twemoji" src="https://twemoji.maxcdn.com/v/latest/svg/1f517.svg" title=":link:" /><a href="https://www.cnblogs.com/liangmingshen/p/9706181.html">生成器</a></p>
<h3 id="_14">递归</h3>
<p>支持递归是编程语言的基本要求，Python自然也不例外。我们尝试用递归计算斐波那契数列的第n项：</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a>    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a>        <span class="k">return</span> <span class="kc">None</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a>    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a>        <span class="k">return</span> <span class="mi">1</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a>    <span class="k">elif</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a>        <span class="k">return</span> <span class="mi">1</span>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-18-9" name="__codelineno-18-9"></a>        <span class="k">return</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-18-10" name="__codelineno-18-10"></a>
<a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="nb">print</span><span class="p">(</span><span class="n">fib</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<a id="__codelineno-18-12" name="__codelineno-18-12"></a>
<a id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="c1"># output：</span>
<a id="__codelineno-18-14" name="__codelineno-18-14"></a><span class="c1"># 55</span>
</code></pre></div>
<h3 id="_15">函数作为参数</h3>
<p>函数作为参数最典型的例子就是排序。如果你有一个列表，你想对它按照自己定义的方式排序。</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="n">sort</span>
</code></pre></div>
<p>map</p>
<p>reduce</p>
<h3 id="_16">函数作为返回值</h3>
<h3 id="_17">闭包</h3>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../1-python-fundamentals/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 基础知识" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              基础知识
            </div>
          </div>
        </a>
      
      
        
        <a href="../3-python-class/" class="md-footer__link md-footer__link--next" aria-label="Next: 类" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              类
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.top", "navigation.tabs", "search.suggest", "toc.integrate", "content.code.annotate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.092fa1f6.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.5a9542cf.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>